<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Highlight.JS -->
	<link rel="stylesheet" href="../ext/github.css">
	<script async defer src="../ext/highlight.js"
		onload="hljs.configure({languages:['javascript'],tabReplace:'\t'})"></script>

	<meta charset="UTF-8">
	<title>跳过网站等待、验证码及登录 - 配置</title>
	<link rel="stylesheet" href="res/main.css">

	<script async defer src="//greasyfork.org/scripts/5266/code/js-beautify.js"></script>
	<script src="res/main.js"></script>
</head>
<body>
	<form class="main" name="config">
		<p>
			您安装的脚本版本: <span id="scriptVer">检测中 ..</span>, 最新版: <span id="scriptLatestVer">获取中 ..</span>
			<sup id="updateLink" class="hide"><a href="https://greasyfork.org/scripts/2600/code/2600.user.js">更新?</a></sup>
			<span class="hide red" id="noteNoScript">
				*如果您禁用了脚本，请先启用脚本然后<a href="javascript:location.reload();">点此刷新</a>
			</span>
			。
		</p>

		<h2>脚本配置</h2>
		<div class="option" id="main-config">
			<section>
				<h3>日志系统</h3>
				<label><input type="checkbox" name="bDiaplayLog" /> 输出脚本调试日志</label>
				<p>
					如果您觉得控制台的输出太乱的话，可以将此项关闭。
				</p>
			</section>

			<section>
				<h3>下载协议</h3>
				<label><input type="radio" name="dUriType" value="0" /> 不使用自定义下载协议</label>
				<p>
					如果您不希望使用第三方下载工具，请勾选此项。
				</p>

				<label><input type="radio" name="dUriType" value="1" /> 使用 <code>cuwcl4c://</code> 协议的下载地址</label>
				<p>
					如 <a href="cuwcl4c://|1|http://imgsrc.baidu.com/forum/pic/item/508c2f9759ee3d6d9f1decb940166d224e4ade1e.jpg|我读书少 你不要骗我.jpg|http://tieba.baidu.com/p/123456">我读书少 你不要骗我.jpg</a>、<a href="cuwcl4c://|1|http://imgsrc.baidu.com/forum/pic/item/4f93d42a2834349b86403882caea15ce37d3beb5.jpg|挖掘机.gif">挖掘机.gif</a>，可自定义下载文件名。
				</p>

				<label><input type="radio" name="dUriType" value="2" /> 使用 <code>Aria2 JSON RPC</code> 下载方式</label>
				<p>
					如 <a href="aria2://|http://imgsrc.baidu.com/forum/pic/item/508c2f9759ee3d6d9f1decb940166d224e4ade1e.jpg|我读书少 你不要骗我.jpg|http://tieba.baidu.com/p/123456">我读书少 你不要骗我.jpg</a>、<a href="aria2://|http://imgsrc.baidu.com/forum/pic/item/4f93d42a2834349b86403882caea15ce37d3beb5.jpg|挖掘机.gif">挖掘机.gif</a>。
					<br />
					缺陷则是脚本会在页面上等候单击事件，有被原始页面的脚本“截胡”的可能。
				</p>
			</section>
		</div>

		<section id="aria2-config" class="hide">
			<h3>Aria2 配置 (<a href="http://aria2.sourceforge.net/" target="_blank">下载 Aria2</a>)</h3>
			<div class="option">
				<h4>验证方式</h4>
				<section id="aria2-auth">
					<label class="inline"><input type="radio" name="dAria_auth" value="0" /> 没有验证</label>
					<label class="inline"><input type="radio" name="dAria_auth" value="1" /> 基础用户名 / 密码验证</label>
					<label class="inline"><input type="radio" name="dAria_auth" value="2" /> 密文验证 [推荐]</label>
				</section>

				<h4>通信配置</h4>
				<p>
					http://
					<span id="blockAuthInfo">
						<span id="blockAuthUser">
							<input class="auth" type="text" name="sAria_user" placeholder="用户名">
							:
						</span>
						<input class="auth" type="text" name="sAria_pass" placeholder="密码 / Secret">
						@
					</span>
					<input class="auth" type="text" name="sAria_host" placeholder="域名">
					: <input class="auth" type="number" name="dAria_port" placeholder="端口" min=1 max=65535>
					/jsonrpc
				</p>
				<p>
					下载目录: <input type="text" name="sAria_dir">
				</p>

				<h4>启动 Aria2 后台</h4>
				<p class="mono small">aria2c --enable-rpc --rpc-listen-all=true --rpc-allow-origin-all
					<span aria-auth="1">"--rpc-user=<span shown-value="sAria_user"></span>"
					"--rpc-passwd=<span shown-value="sAria_pass"></span>"</span>
					<span aria-auth="2">"--rpc-secret=<span shown-value="sAria_pass"></span>"</span>
				</p>
			</div>

		</section>

		<h2>自定义规则</h2>
		<div class="option">
			<label><input type="checkbox" name="bUseCustomRules" /> 启用自定义规则</label>
			<p>
				您可以在此填入您自己的规则，您可以参考下属文档: <a href="//api.jquery.com/">jQuery API</a>、<a href="https://github.com/JixunMoe/cuwcl4c/blob/master/src/helper.js">H 库</a>。<br />
				<span class="red">请注意</span>：规则会被脚本<code>eval</code>执行，如果有任何错误将导致所有自定义规则失效。
			</p>

			<p class="no-sel mono"><span class="hljs-keyword">var</span> customRules = [</p>
			<textarea name="sCustomRule" class="full-width" cols="80" rows="7"></textarea>
			<p class="no-sel mono right">];</p>
			<pre id="rulePreview" class="full-width"></pre>
		</div>

		<div class="center">
			<button id="btnSaveConfig" >储存设定</button>
			<button id="btnResetConfig">恢复默认</button>
			<button id="btnPreviewCode">预览自定义规则</button>
		</div>

		<div id="opLog"></div>
	</form>
</body>
</html>
